<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config your Dreams</title>
    <style>
        /* Grundlegende Layout- und Schriftarten-Einstellungen */
        body {
            background-image: url('https://constructorable.github.io/katalog_03/BootyGirl.jp');
            /* Dein Hintergrundbild */
            background-size: cover;
            /* Das Bild deckt den gesamten Bildschirm ab */
            background-position: center;
            /* Zentriert das Bild */
            background-attachment: fixed;
            /* Das Bild bleibt beim Scrollen fixiert */
            font-family: 'Arial', sans-serif;
            background-color: #121212;
            /* Dunkler Hintergrund */
            color: #f5f5f5;
            /* Helles Textfarbe */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;

        }

        .welcome-modal {
            display: block;
            /* Modal ist anfangs sichtbar */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            /* Dunkler Hintergrund f√ºr den Willkommensbildschirm */
            text-align: center;
        }

        .welcome-modal-content {
            background-color: #444;
            margin: 20% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            color: #f5f5f5;
            border-radius: 8px;
        }

        .welcome-modal-content h2 {
            margin-bottom: 20px;
        }

        .welcome-modal-content button {
            background-color: #ff7f00;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
        }

        .welcome-modal-content button:hover {
            background-color: #ff6600;
        }

        /* Hauptcontainer (Produktkonfigurator) */
        .container {
            display: none;
            /* Der Container ist anfangs unsichtbar */
            width: 350px;
            padding: 30px;
            border-radius: 10px;
            background-color: rgba(30, 30, 30, 0.8);
            /* Dunkler Container-Hintergrund mit Transparenz */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            /* Weicher Schatten */
            text-align: center;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ffa500;
            /* Akzentfarbe f√ºr den Titel */
        }

        /* Label-Styling */
        label {
            display: block;
            font-size: 20px;
            margin-bottom: 8px;
            color: #bbb;
            /* Helle Textfarbe f√ºr Labels */
        }

        /* Dropdown-Men√ºs */
        select {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #444;
            /* Dunkler Rand f√ºr das Dropdown */
            border-radius: 6px;
            background-color: #333;
            /* Dunkler Hintergrund f√ºr Dropdowns */
            color: #fff;
            /* Wei√üe Schrift f√ºr Dropdown-Optionen */
            font-size: 16px;
        }

        /* Option-Werte */
        option {
            background-color: #121212;
            /* Dunkler Hintergrund f√ºr Optionen */
            color: #f5f5f5;
            /* Helle Textfarbe f√ºr Optionen */
        }

        /* Button-Styling */
        button {
            width: 100%;
            padding: 12px;
            background-color: #cc8400;
            /* Akzentfarbe f√ºr den Button */
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #ff7f00;
            /* Etwas dunkler bei Hover */
        }

        button:active {
            background-color: #e67300;
            /* Noch dunkler bei Klick */
        }

        /* Fehler- oder Hinweis-Styles */
        .error-message {
            color: #ff4d4d;
            /* Rote Textfarbe f√ºr Fehler */
            font-size: 14px;
            margin-top: 10px;
        }

        /* Responsives Design: Verkleinern der Containergr√∂√üe auf kleineren Bildschirmen */
        @media (max-width: 480px) {
            .container {
                width: 100%;
                /* Container nimmt 100% der Bildschirmbreite ein */
                padding: 20px;
            }

            h1 {
                font-size: 20px;
                /* Kleinere Schrift f√ºr den Titel */
            }

            select,
            button {
                font-size: 14px;
                /* Kleinere Schrift f√ºr Dropdowns und Buttons */
                padding: 10px;
            }
        }

        /* Modal (Popup) Styling */
        .modal {
            display: none;
            /* Modal ist standardm√§√üig versteckt */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            /* Hintergrund wird leicht dunkel */
            background-color: rgba(0, 0, 0, 0.4);
            /* Durchsichtiges Schwarz */
        }

        .modal-content {
            background-color: #333;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            text-align: center;
            color: #f5f5f5;
            border-radius: 8px;
        }

        .modal-content h2 {
            margin-bottom: 10px;
        }

        .modal-content button {
            background-color: #ff7f00;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
        }

        .modal-content button:hover {
            background-color: #ff6600;
        }

        input::placeholder,
        select::placeholder {
            text-align: center;
            /* Horizontal zentrieren */
            vertical-align: middle;
            /* Vertikal zentrieren */
        }

        /* Input-Elemente an sich */
        input,
        select {
            text-align: center;
            /* Text (inklusive Platzhalter) horizontal zentrieren */
            padding: 12px;
            /* Padding f√ºr die vertikale Zentrierung */
            height: 40px;
            /* Feste H√∂he f√ºr Input */
        }

        /* F√ºr bessere vertikale Zentrierung auch innerhalb des Input- oder Select-Elements */
        input::placeholder {
            line-height: normal;
            /* F√ºr eine gleichm√§√üige vertikale Ausrichtung */
        }

        select::placeholder {
            line-height: normal;
            /* Gleiches f√ºr das Select */
        }

        /* Medienabfrage f√ºr Smartphones und mobile Ger√§te */
        @media (max-width: 768px) {

            input,
            select {
                font-size: 20px;
                /* Gr√∂√üere Schrift f√ºr mobile Ger√§te */
                padding: 16px;
                /* Mehr Padding f√ºr bessere Benutzerinteraktion */
            }

            /* Select Boxen und Buttons gr√∂√üer machen */
            select,
            input[type="submit"],
            button {
                padding: 16px;
                font-size: 18px;
            }

            /* Button-Design f√ºr Mobilger√§te */
            button {
                width: 100%;
                /* Volle Breite des Containers */
                padding: 16px;
                font-size: 18px;
                cursor: pointer;
                background-color: #ff7f00;
                color: white;
                border: none;
                border-radius: 4px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            button:hover {
                background-color: #0056b3;
            }

            /* Die Dropdown-Pfeile f√ºr Select anpassen */
            select::after {
                content: '‚ñº';
                /* Gr√∂√üerer Pfeil */
                font-size: 22px;
            }

            label {

                font-size: 26px;

            }
        }

        /* Medienabfrage f√ºr sehr kleine Ger√§te wie Handys */
        @media (max-width: 480px) {

            input,
            select {
                font-size: 22px;
                /* Noch gr√∂√üere Schrift f√ºr kleinere Bildschirme */
                padding: 20px;
                /* Mehr Padding f√ºr Touchscreen-Ger√§te */
            }

            /* Button noch gr√∂√üer auf sehr kleinen Ger√§ten */
            button {
                font-size: 20px;
                padding: 18px;
            }

            label {
                font-size: 26px;
            }
        }


        /* Basisstile f√ºr Input-Elemente */
input, select {
    padding: 12px;
    font-size: 16px;
    width: 100%;
    margin-bottom: 10px;
    border: none;
    border-radius: 4px;
    box-sizing: border-box;
    text-align: center; /* Horizontal zentrieren */
    height: 50px; /* H√∂he f√ºr Input-Felder setzen */
}

/* Vertikale und horizontale Zentrierung des Platzhalters */
input::placeholder {
    text-align: center; /* Horizontal zentrieren */
    line-height: normal; /* Um den Text vertikal zu zentrieren */
}

/* Spezielle Stile f√ºr Select-Optionen */
select {
    background-color: #262323;
    font-size: 18px;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    padding-right: 40px;
    height: 50px; /* Gleiche H√∂he wie bei input */
    text-align: center;
}

/* Select Boxen und Buttons f√ºr mobile Ger√§te */
@media (max-width: 768px) {
    input, select {
        font-size: 20px; /* Gr√∂√üere Schrift */
        padding: 40px; /* Mehr Padding */
    }

    button {
        width: 100%;
        padding: 16px;
        font-size: 18px;
    }
}

/* Medienabfrage f√ºr kleinere Ger√§te */
@media (max-width: 480px) {
    input, select {
        font-size: 22px;
        padding: 40px;
    }

    button {
        font-size: 20px;
        padding: 18px;
    }
}

    </style>
</head>

<body>


    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-modal-content">
            <h2>uhhhh, Simone üòã</h2>
            <p>stell dir vor es gibt einen hei√üen Abend mit vielen analen Spielen. Eines davon ist das geliebte "ganz
                rein, ganz" raus Spiel (inkl. offenen Poloch)üòã. Welche Gr√∂√üe d√ºrfte das Spielzeug haben?</p>
            <button id="closeWelcomeModalBtn">Los geht's!</button>
        </div>
    </div>

    <div id="configuratorContainer" class="container">




        <h1>let's play üòã</h1>
        <form id="configuratorForm">
            <!-- Dropdowns -->
            <label for="diameter">Durchmesser:</label>
            <select id="diameter" name="diameter" required>
                <option value="" disabled selected>Bitte w√§hlen...</option>
                <option value="3">3 cm</option>
                <option value="4">4 cm</option>
                <option value="5">5 cm</option>
                <option value="6">6 cm</option>
                <option value="7">7 cm</option>
            </select>

            <label for="length">L√§nge:</label>
            <select id="length" name="length" required>
                <option value="" disabled selected>Bitte w√§hlen...</option>
                <option value="15">15 cm</option>
                <option value="18">18 cm</option>
                <option value="22">22 cm</option>
                <option value="25">25 cm</option>
                <option value="28">28 cm</option>
                <option value="32">32 cm</option>
            </select>

            <label for="color">Farbe:</label>
            <select id="color" name="color" required>
                <option value="" disabled selected>Bitte w√§hlen...</option>
                <option value="Lila">Violett</option>
                <option value="Rot">Rot</option>
                <option value="Blau">Blau</option>
                <option value="Schwarz">Schwarz</option>
            </select>

            <button type="submit">Absenden</button>
        </form>

        <div id="successModal" class="modal">
            <div class="modal-content">
                <h2>Uhhh, deine Auswahl ist hei√ü!!! üî•</h2>
                <p>du wei√üt ja, wie sehr das manche m√∂gen üòâ</p>
                <button id="closeModalBtn">Schlie√üen</button>
            </div>
        </div>

    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        const firebaseConfig = {

            apiKey: "AIzaSyCxuvtVZokIclZNV5q2sfuJj3hzI34vG-8",

            authDomain: "databaseoption01.firebaseapp.com",

            databaseURL: "https://databaseoption01-default-rtdb.europe-west1.firebasedatabase.app",

            projectId: "databaseoption01",

            storageBucket: "databaseoption01.firebasestorage.app",

            messagingSenderId: "18397762779",

            appId: "1:18397762779:web:99d3a6ab0104864eeee8fe"

        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Willkommensbildschirm schlie√üen
        const closeWelcomeModalBtn = document.getElementById('closeWelcomeModalBtn');
        const welcomeModal = document.getElementById('welcomeModal');
        const configuratorContainer = document.getElementById('configuratorContainer');

        closeWelcomeModalBtn.addEventListener('click', () => {
            welcomeModal.style.display = 'none';
            configuratorContainer.style.display = 'block'; // Zeige den Hauptcontainer, wenn das Willkommensmodal geschlossen wird
        });

        // Funktion zum Erzeugen des Timestamp im Format YYYY-MM-DD_HH:MM:SS
        function getFormattedTimestamp() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            return `${year}-${month}-${day}_${hours}:${minutes}:${seconds}`;
        }

        // Formularabsendefunktion
        const form = document.getElementById("configuratorForm");

        form.addEventListener("submit", async (event) => {
            event.preventDefault(); // Verhindert das Standard-Formularverhalten

            // Werte aus den Dropdowns abrufen
            const diameter = document.getElementById("diameter").value;
            const length = document.getElementById("length").value;
            const color = document.getElementById("color").value;

            // Debugging: Ausgabe der ausgew√§hlten Werte
            console.log("Durchmesser: ", diameter);
            console.log("L√§nge: ", length);
            console.log("Farbe: ", color);

            // √úberpr√ºfen, ob alle Werte ausgew√§hlt wurden
            if (!diameter || !length || !color) {
                alert("Bitte alle Optionen ausw√§hlen!");
                return;
            }

            // Erzeugen des Timestamp
            const timestamp = getFormattedTimestamp();

            // Daten an Firebase senden
            try {
                const refPath = `configurations/${timestamp}`; // Verwenden des formatierten Timestamps als Pfad
                const configRef = ref(database, refPath);

                // Daten setzen
                await set(configRef, {
                    diameter: diameter + " cm",
                    length: length + " cm",
                    color: color,
                    timestamp: timestamp // Der Timestamp wird ebenfalls gespeichert
                });

                // Popup anzeigen
                successModal.style.display = "block";
                form.reset(); // Formular zur√ºcksetzen
            } catch (error) {
                console.error("Fehler beim Speichern der Daten:", error);
                alert("Fehler beim Speichern der Daten!");
            }
        });

        // Schlie√üen des Popups
        closeModalBtn.addEventListener("click", () => {
            successModal.style.display = "none";
        });

        // Wenn der Benutzer au√üerhalb des Popups klickt, schlie√üt es sich
        window.addEventListener("click", (event) => {
            if (event.target === successModal) {
                successModal.style.display = "none";
            }
        });

    </script>

</body>

</html>
