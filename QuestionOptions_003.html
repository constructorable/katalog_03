<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config your Dreams</title>
    <style>
        /* Grundlegende Layout- und Schriftarten-Einstellungen */
        body {
            background-image: url('https://constructorable.github.io/katalog_03/BootyGirl.jp');
            /* Dein Hintergrundbild */
            background-size: cover;
            /* Das Bild deckt den gesamten Bildschirm ab */
            background-position: center;
            /* Zentriert das Bild */
            background-attachment: fixed;
            /* Das Bild bleibt beim Scrollen fixiert */
            font-family: 'Arial', sans-serif;
            background-color: #121212;
            /* Dunkler Hintergrund */
            color: #f5f5f5;
            /* Helles Textfarbe */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;

        }

        .welcome-modal {
            display: block;
            /* Modal ist anfangs sichtbar */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            /* Dunkler Hintergrund f√ºr den Willkommensbildschirm */
            text-align: center;
        }

        .welcome-modal-content {
            background-color: #444;
            margin: 20% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            color: #f5f5f5;
            border-radius: 8px;
        }

        .welcome-modal-content h2 {
            margin-bottom: 20px;
        }

        .welcome-modal-content button {
            background-color: #ff7f00;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
        }

        .welcome-modal-content button:hover {
            background-color: #ff6600;
        }

        /* Hauptcontainer (Produktkonfigurator) */
        .container {
            display: none;
            /* Der Container ist anfangs unsichtbar */
            width: 350px;
            padding: 30px;
            border-radius: 10px;
            background-color: rgba(30, 30, 30, 0.8);
            /* Dunkler Container-Hintergrund mit Transparenz */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            /* Weicher Schatten */
            text-align: center;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ffa500;
            /* Akzentfarbe f√ºr den Titel */
        }

        /* Label-Styling */
        label {
            display: block;
            font-size: 14px;
            margin-bottom: 8px;
            color: #bbb;
            /* Helle Textfarbe f√ºr Labels */
        }

        /* Dropdown-Men√ºs */
        select {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #444;
            /* Dunkler Rand f√ºr das Dropdown */
            border-radius: 6px;
            background-color: #333;
            /* Dunkler Hintergrund f√ºr Dropdowns */
            color: #fff;
            /* Wei√üe Schrift f√ºr Dropdown-Optionen */
            font-size: 16px;
        }

        /* Option-Werte */
        option {
            background-color: #121212;
            /* Dunkler Hintergrund f√ºr Optionen */
            color: #f5f5f5;
            /* Helle Textfarbe f√ºr Optionen */
        }

        /* Button-Styling */
        button {
            width: 100%;
            padding: 12px;
            background-color: #ffa500;
            /* Akzentfarbe f√ºr den Button */
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #ff7f00;
            /* Etwas dunkler bei Hover */
        }

        button:active {
            background-color: #e67300;
            /* Noch dunkler bei Klick */
        }

        /* Fehler- oder Hinweis-Styles */
        .error-message {
            color: #ff4d4d;
            /* Rote Textfarbe f√ºr Fehler */
            font-size: 14px;
            margin-top: 10px;
        }

        /* Responsives Design: Verkleinern der Containergr√∂√üe auf kleineren Bildschirmen */
        @media (max-width: 480px) {
            .container {
                width: 100%;
                /* Container nimmt 100% der Bildschirmbreite ein */
                padding: 20px;
            }

            h1 {
                font-size: 20px;
                /* Kleinere Schrift f√ºr den Titel */
            }

            select,
            button {
                font-size: 14px;
                /* Kleinere Schrift f√ºr Dropdowns und Buttons */
                padding: 10px;
            }
        }

        /* Modal (Popup) Styling */
        .modal {
            display: none;
            /* Modal ist standardm√§√üig versteckt */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            /* Hintergrund wird leicht dunkel */
            background-color: rgba(0, 0, 0, 0.4);
            /* Durchsichtiges Schwarz */
        }

        .modal-content {
            background-color: #333;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            text-align: center;
            color: #f5f5f5;
            border-radius: 8px;
        }

        .modal-content h2 {
            margin-bottom: 10px;
        }

        .modal-content button {
            background-color: #ff7f00;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
        }

        .modal-content button:hover {
            background-color: #ff6600;
        }

        input::placeholder,
        select::placeholder {
            text-align: center;
            /* Horizontal zentrieren */
            vertical-align: middle;
            /* Vertikal zentrieren */
        }

        /* Input-Elemente an sich */
        input,
        select {
            text-align: center;
            /* Text (inklusive Platzhalter) horizontal zentrieren */
            padding: 12px;
            /* Padding f√ºr die vertikale Zentrierung */
            height: 40px;
            /* Feste H√∂he f√ºr Input */
        }

        /* F√ºr bessere vertikale Zentrierung auch innerhalb des Input- oder Select-Elements */
        input::placeholder {
            line-height: normal;
            /* F√ºr eine gleichm√§√üige vertikale Ausrichtung */
        }

        select::placeholder {
            line-height: normal;
            /* Gleiches f√ºr das Select */
        }
    </style>
</head>

<body>


    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-modal-content">
            <h2>uhhhh, Simone üòã</h2>
            <p>stell dir vor es gibt einen hei√üen Abend mit vielen analen Spielen. Eines davon ist das geliebte "ganz
                rein, ganz" raus Spiel (inkl. offenen Poloch)üòã. Welche Gr√∂√üe d√ºrfte das Spielzeug haben?</p>
            <button id="closeWelcomeModalBtn">Los geht's!</button>
        </div>
    </div>

    <div id="configuratorContainer" class="container">




        <h1>let's play üòã</h1>
        <form id="configuratorForm">
            <!-- Dropdowns -->
            <label for="diameter">Durchmesser:</label>
            <select id="diameter" name="diameter" required>
                <option value="" disabled selected>Bitte w√§hlen...</option>
                <option value="3">3 cm</option>
                <option value="4">4 cm</option>
                <option value="5">5 cm</option>
                <option value="6">6 cm</option>
                <option value="7">7 cm</option>
            </select>

            <label for="length">L√§nge:</label>
            <select id="length" name="length" required>
                <option value="" disabled selected>Bitte w√§hlen...</option>
                <option value="15">15 cm</option>
                <option value="18">18 cm</option>
                <option value="22">22 cm</option>
                <option value="25">25 cm</option>
                <option value="28">28 cm</option>
                <option value="32">32 cm</option>
            </select>

            <label for="color">Farbe:</label>
            <select id="color" name="color" required>
                <option value="" disabled selected>Bitte w√§hlen...</option>
                <option value="Lila">Violett</option>
                <option value="Rot">Rot</option>
                <option value="Blau">Blau</option>
                <option value="Schwarz">Schwarz</option>
            </select>

            <button type="submit">Absenden</button>
        </form>

        <div id="successModal" class="modal">
            <div class="modal-content">
                <h2>Erfolgreich gespeichert!</h2>
                <p>Die Daten wurden erfolgreich in der Datenbank gespeichert.</p>
                <button id="closeModalBtn">Schlie√üen</button>
            </div>
        </div>

    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        const firebaseConfig = {

            apiKey: "AIzaSyCxuvtVZokIclZNV5q2sfuJj3hzI34vG-8",

            authDomain: "databaseoption01.firebaseapp.com",

            databaseURL: "https://databaseoption01-default-rtdb.europe-west1.firebasedatabase.app",

            projectId: "databaseoption01",

            storageBucket: "databaseoption01.firebasestorage.app",

            messagingSenderId: "18397762779",

            appId: "1:18397762779:web:99d3a6ab0104864eeee8fe"

        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Willkommensbildschirm schlie√üen
        const closeWelcomeModalBtn = document.getElementById('closeWelcomeModalBtn');
        const welcomeModal = document.getElementById('welcomeModal');
        const configuratorContainer = document.getElementById('configuratorContainer');

        closeWelcomeModalBtn.addEventListener('click', () => {
            welcomeModal.style.display = 'none';
            configuratorContainer.style.display = 'block'; // Zeige den Hauptcontainer, wenn das Willkommensmodal geschlossen wird
        });

        // Funktion zum Erzeugen des Timestamp im Format YYYY-MM-DD_HH:MM:SS
        function getFormattedTimestamp() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            return `${year}-${month}-${day}_${hours}:${minutes}:${seconds}`;
        }

        // Formularabsendefunktion
        const form = document.getElementById("configuratorForm");

        form.addEventListener("submit", async (event) => {
            event.preventDefault(); // Verhindert das Standard-Formularverhalten

            // Werte aus den Dropdowns abrufen
            const diameter = document.getElementById("diameter").value;
            const length = document.getElementById("length").value;
            const color = document.getElementById("color").value;

            // Debugging: Ausgabe der ausgew√§hlten Werte
            console.log("Durchmesser: ", diameter);
            console.log("L√§nge: ", length);
            console.log("Farbe: ", color);

            // √úberpr√ºfen, ob alle Werte ausgew√§hlt wurden
            if (!diameter || !length || !color) {
                alert("Bitte alle Optionen ausw√§hlen!");
                return;
            }

            // Erzeugen des Timestamp
            const timestamp = getFormattedTimestamp();

            // Daten an Firebase senden
            try {
                const refPath = `configurations/${timestamp}`; // Verwenden des formatierten Timestamps als Pfad
                const configRef = ref(database, refPath);

                // Daten setzen
                await set(configRef, {
                    diameter: diameter + " cm",
                    length: length + " cm",
                    color: color,
                    timestamp: timestamp // Der Timestamp wird ebenfalls gespeichert
                });

                // Popup anzeigen
                successModal.style.display = "block";
                form.reset(); // Formular zur√ºcksetzen
            } catch (error) {
                console.error("Fehler beim Speichern der Daten:", error);
                alert("Fehler beim Speichern der Daten!");
            }
        });

        // Schlie√üen des Popups
        closeModalBtn.addEventListener("click", () => {
            successModal.style.display = "none";
        });

        // Wenn der Benutzer au√üerhalb des Popups klickt, schlie√üt es sich
        window.addEventListener("click", (event) => {
            if (event.target === successModal) {
                successModal.style.display = "none";
            }
        });

    </script>

</body>

</html>